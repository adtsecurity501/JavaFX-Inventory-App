<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<VBox xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/21"
      fx:controller="assettracking.controller.BulkIntakeDialogController"
      spacing="15" style="-fx-padding: 20;" prefWidth="800.0" prefHeight="700.0">

    <Label styleClass="h4" text="Bulk Intake from Pasted List"/>
    <Separator/>

    <!-- Step 1: Package Selection -->
    <TitledPane text="Step 1: Select the Package for these Assets" collapsible="false">
        <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10;">
            <Label text="Search/Select Package:" HBox.hgrow="NEVER"/>
            <ComboBox fx:id="packageComboBox" editable="true" prefWidth="400.0" HBox.hgrow="ALWAYS"
                      promptText="Type tracking number to search..."/>
            <Button text="Create New Package..." onAction="#handleNewPackage"/>
        </HBox>
    </TitledPane>

    <!-- Step 2: Serial Numbers -->
    <TitledPane text="Step 2: Paste Serial Numbers (one per line)" collapsible="false" VBox.vgrow="ALWAYS">
        <TextArea fx:id="serialsTextArea" promptText="Paste list of serial numbers here..."/>
    </TitledPane>

    <!-- Step 3: Optional Details -->
    <TitledPane text="Step 3: Provide Common Details (Optional)" collapsible="false">
        <GridPane hgap="10" vgap="8" style="-fx-padding: 10;">
            <columnConstraints>
                <ColumnConstraints hgrow="NEVER" minWidth="100.0"/>
                <ColumnConstraints hgrow="ALWAYS"/>
            </columnConstraints>
            <Label text="Category:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
            <TextField fx:id="categoryField" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
            <Label text="Make:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
            <TextField fx:id="makeField" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
            <Label text="Model Number:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
            <TextField fx:id="modelField" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
            <Label text="Description:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
            <TextField fx:id="descriptionField" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
        </GridPane>
    </TitledPane>

    <!-- Action Buttons and Feedback -->
    <HBox alignment="CENTER_RIGHT" spacing="10">
        <Button fx:id="processButton" text="Process Intake" onAction="#handleProcessIntake" styleClass="success"/>
        <Button text="Close" onAction="#handleClose"/>
    </HBox>

    <Separator style="-fx-padding: 10 0 0 0;"/>

    <GridPane hgap="20" VBox.vgrow="ALWAYS">
        <columnConstraints>
            <ColumnConstraints percentWidth="50"/>
            <ColumnConstraints percentWidth="50"/>
        </columnConstraints>
        <VBox spacing="5" GridPane.columnIndex="0">
            <Label fx:id="successLabel" style="-fx-font-weight: bold;" text="Successfully Intaken (0)"/>
            <ListView fx:id="successListView" VBox.vgrow="ALWAYS"/>
        </VBox>
        <VBox spacing="5" GridPane.columnIndex="1">
            <Label fx:id="failedLabel" style="-fx-font-weight: bold;" text="Failed / Skipped (0)"/>
            <ListView fx:id="failedListView" VBox.vgrow="ALWAYS"/>
        </VBox>
    </GridPane>
</VBox>